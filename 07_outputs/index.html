<!DOCTYPE html>
<html lang="en">

<title>PS70: Intro to Digital Fabrication </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="../style.css" rel="stylesheet">


<nav class="navbar navbar-expand-sm navbar-dark" style="background-color: #bc9cb0; color: #EEE7E8;">
  <div style="align-items: center; justify-content: center;" class="container-fluid">
    <div class="flexrow">
      <h2 class="nav-title" style="background-color: #bc9cb0; color: #556053; ">Week 7: Outputs</h2>
    </div>
    <div class="navbar-nav">
      <h4><a class="nav-link" href="../index.html">Home</a></h4>
      <h4><a class="nav-link" href="../about.html">About</a></h4>
    </div>
  </div>
</nav>

<body>
<xmp style="display:none;">
<div class="textcontainer">
<p class="margin">   </p>


<h4>Assignment: **Minimum Viable Product for Final Project**</h4>

Here is my code in arduino below:
<pre>
  <code class="arduino" style = "color: black; background-color: transparent;">
\#include <ESP_I2S.h>
\#include <ESP32Servo.h>


    const int buff_size = 128;
    int available_bytes, read_bytes;
    uint8_t buffer[buff_size];
    I2SClass I2S;
    long lastTimeWritingServo = 0;
    int pos = 5;
    Servo myservo;
    void setup() {
      myservo.attach(32);
      myservo.write(0);
      Serial.begin(115200);
      I2S.setPins(5, 25, -1, 33, -1); //SCK, WS, SDOUT, SDIN, MCLK
      if(!I2S.begin(I2S_MODE_STD, 16000, I2S_DATA_BIT_WIDTH_32BIT, I2S_SLOT_MODE_MONO)){
        Serial.println("Failed to initialized");
        while(1){
          Serial.println("Did not initialize");
          delay(1000);
        }
      }
     
      // I2S.read();
      // available_bytes = I2S.available();
      // if(available_bytes < buff_size) {
      //   read_bytes = I2S.readBytes(buffer, available_bytes);
      // } else {
      //   read_bytes = I2S.readBytes(buffer, buff_size);
      // }
      // I2S.write(buffer, read_bytes);
      // I2S.end();
    }


    void loop() {
      while(I2S.available()){
       
       
        int sample = I2S.read();
        if((sample == 0) || sample == -1){
          return;
        }
        sample >>= 14;
        sample += 14000;


        if(sample >= 50000 || sample <= -50000){
          myservo.write(180);
          lastTimeWritingServo = millis();
        }
        if ((millis() - lastTimeWritingServo) >= 4000){
          myservo.write(0);
        }
        Serial.print(100000);
        Serial.print(" ");
        Serial.print(-100000);
        Serial.print(" ");
        Serial.println(sample);
      }
    }
  </code>
</pre>


</div>
</xmp>
</body>

<script src="../strapdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" ></script>

</html>